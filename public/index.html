<html>
  <head>
    <meta name="google-signin-client_id" content="105111735905-g5vldgpqkigksu20f8lqo35h9magaj4f.apps.googleusercontent.com">
    <title>Express</title>
    <link rel="stylesheet" href="/stylesheets/style.css">
    <!-- <script type="text/javascript" src="https://platform.linkedin.com/in.js">
      api_key: 86r5bs4f88hqwy
      onLoad: onLinkedInLoad
      authorize: true
      scope: r_basicprofile r_emailaddress
    </script> -->
    
    <!-- <script type="text/javascript">
      // 2. Runs when the JavaScript framework is loaded
      function onLinkedInLoad() {
        console.log(IN.Event.on);
        IN.Event.on(IN, "auth", onLinkedInAuth);
      }
      
      
      // 2. Runs when the viewer has authenticated
      function onLinkedInAuth() {
    
        IN.API.Profile("me").fields("id","first-name", "last-name", "email-address").result(displayProfiles);
      }
    
      // 2. Runs when the Profile() API call returns successfully
      function displayProfiles(profiles) {
        console.log(profiles);
        // member = profiles.values[0];
        // document.getElementById("profiles").innerHTML = 
        //   "<p>"+member.id+"<br> " +  member.firstName + "<br> " + member.lastName + "<br>"+member.emailAddress+"</p>";
      }
    </script> -->
  </head>

  <body>
    <h1>Get An Expert</h1>
    <p>Welcome to Get An Expert</p>

    <button onclick="loginFacebook()">Login with Facebook</button>
    <div class="g-signin2" data-onsuccess="onSignIn"></div>
    <!-- <script type="in/Login" defer></script> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '956462854780877',
          cookie     : true,
          xfbml      : true,
          version    : 'v3.0'
        });
          
        FB.AppEvents.logPageView();   
          
      };
    
      (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>

    <script>
      function loginFacebook()
      {

        FB.login(function(response) {
          if (response.authResponse) {
            let accessToken = response.authResponse.accessToken;
              console.log(response.authResponse);
              axios.post('/api/auth/facebook?access_token=' + response.authResponse.accessToken).then(res => console.log(res)).catch(err => console.error(e))
            } else {
              console.log('User cancelled login or did not fully authorize.');
            }
        }, {scope: 'public_profile,email'});
      }
    </script>

    <script>
      function onSignIn(googleUser) {
        let accessToken = googleUser.wc.access_token
        var profile = googleUser.getBasicProfile();
        console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
        console.log('Name: ' + profile.getName());
        console.log('Image URL: ' + profile.getImageUrl());
        console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
        console.log(accessToken);
        // axios.post('/api/auth/google?access_token=' + accessToken).then(res => console.log(res)).catch(err => console.error(e))
      }
    </script>
  </body>
</html>
